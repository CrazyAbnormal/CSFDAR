import{A as D}from"./AppLayout-C_0tXS6j.js";import{_ as E}from"./Modal.vue_vue_type_script_setup_true_lang-BmXE4npx.js";import{d as m,i as L,j as c,o as i,c as y,w as s,a as t,b as a,g as u,t as l,u as S,k as T,e as p,h as P,F as V,l as x}from"./app-HJaQnsHa.js";import{S as w}from"./sweetalert2.esm.all-BccGxJ0c.js";import"./dar-logo-B4Huuyod.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"py-12"},Y={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},G={class:"w-full m-5 text-right"},H={class:"text-right m-5"},J={class:"text-center"},K={class:"text-center"},Q={key:1,span:""},W={class:"m-2"},X={style:{color:"gray"}},Z={class:"text-center"},lt={__name:"Index",props:{accounts:Object,regions:Object,services:Object},setup(d){const z=d,B=async n=>{w.fire({html:'<div style="font-weight: bold; font-size:25px">Are you sure you want to reset password for this account?</div> ',icon:"warning",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Yes, I'm sure",showLoaderOnConfirm:!0}).then(e=>{e.isConfirmed&&x.post("/accounts/reset-password",{id:n},{onSuccess:()=>{w.fire({title:"Success",icon:"success",text:"Password has been successfully reset."})},onError:()=>{w.fire({title:"Failed",icon:"error",text:this.error?this.error:"Something went wrong please check"})}})})},b=m(!1),k=m(null);m({});const v=m({}),f=m("");L(()=>f.value,n=>{x.get("/accounts",{search:n},{preserveState:!0})});const g=async(n,e,_)=>{b.value=n,k.value=e,v.value=_},I=async()=>{v.value={}};let r=1;const N=async n=>{x.visit("/accounts?page="+n,{preserveState:!0}),r=n};return(n,e)=>{const _=c("v-text-field"),C=c("v-col"),h=c("v-btn"),R=c("v-row"),A=c("v-chip"),$=c("v-pagination"),j=c("v-table"),F=c("v-card");return i(),y(D,{title:"Dashboard"},{header:s(()=>e[5]||(e[5]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Accounts ",-1)])),default:s(()=>[t("div",M,[t("div",Y,[t("div",q,[a(R,{style:{"margin-bottom":"-30px"}},{default:s(()=>[a(C,null,{default:s(()=>[t("div",G,[a(_,{loading:n.loading,"append-inner-icon":"mdi-magnify",density:"compact",label:"Search",variant:"solo","hide-details":"","single-line":"",modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=o=>f.value=o),"onClick:appendInner":n.onClick},null,8,["loading","modelValue","onClick:appendInner"])])]),_:1}),a(C,null,{default:s(()=>[t("div",H,[a(h,{onClick:e[1]||(e[1]=o=>g(!0,"Add",{})),size:"small","prepend-icon":"mdi-plus",color:"green"},{default:s(()=>e[6]||(e[6]=[u(" Account ")])),_:1})])]),_:1})]),_:1}),a(F,{class:"m-3"},{default:s(()=>[a(j,null,{bottom:s(()=>[t("div",W,[t("span",X,[u(" Showing "+l(d.accounts.meta.from)+" to "+l(d.accounts.meta.to)+" out of ",1),t("b",null,l(d.accounts.meta.total)+" records",1)]),t("div",Z,[a($,{modelValue:S(r),"onUpdate:modelValue":e[2]||(e[2]=o=>T(r)?r.value=o:r=o),length:d.accounts.meta.last_page,circle:"",onClick:e[3]||(e[3]=o=>N(S(r)))},null,8,["modelValue","length"])])])]),default:s(()=>[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",{class:"text-left"}," # "),t("th",{class:"text-left"}," Name "),t("th",{class:"text-left"}," Designation "),t("th",{class:"text-left"}," Email "),t("th",{class:"text-left"}," Region "),t("th",{class:"text-center"}," Role/Account Type "),t("th",{class:"text-center"}," Actions ")])],-1)),t("tbody",null,[(i(!0),p(V,null,P(d.accounts.data,(o,O)=>(i(),p("tr",{key:o.id,class:"hover:bg-gray-200"},[o?(i(),p(V,{key:0},[t("td",null,l(O+1),1),t("td",null,l(o.name),1),t("td",null,l(o.designation),1),t("td",null,l(o.email),1),t("td",null,l(o.region.order),1),t("td",J,[o.account_type=="admin"?(i(),y(A,{key:0,class:"bg-indigo",size:"small"},{default:s(()=>[u(l(o.account_type),1)]),_:2},1024)):(i(),y(A,{key:1,class:"bg-green",size:"small"},{default:s(()=>[u(l(o.account_type),1)]),_:2},1024))]),t("td",K,[a(h,{size:"small",onClick:U=>B(o.id),"prepend-icon":"mdi-lock-reset",color:"secondary",class:"mr-5"},{default:s(()=>e[7]||(e[7]=[u(" Reset ")])),_:2},1032,["onClick"]),a(h,{onClick:U=>g(!0,"Update",o),size:"small","prepend-icon":"mdi-update",color:"primary"},{default:s(()=>e[8]||(e[8]=[u(" Update ")])),_:2},1032,["onClick"])])],64)):(i(),p("td",Q," No data at the moment"))]))),128))])]),_:1})]),_:1})])])]),a(E,{value:b.value,account:v.value,data:z,action:k.value,onInput:e[4]||(e[4]=o=>g(n.is_show,n.action,n.user_data)),onReloadAccounts:I},null,8,["value","account","data","action"])]),_:1})}}};export{lt as default};
