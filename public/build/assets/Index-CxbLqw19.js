import"./vue-multiselect.css_vue_type_style_index_0_src_true_lang-B0IMtBhF.js";import{A as B}from"./AppLayout-C_0tXS6j.js";import{_ as I}from"./Modal.vue_vue_type_script_setup_true_lang-A_z764Qd.js";import{y as R,d as _,j as m,o as c,c as C,w as s,a as t,b as o,g as u,f as b,e as p,h as S,F as f,t as g,l as y}from"./app-HJaQnsHa.js";import{_ as D}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./dar-logo-B4Huuyod.js";const O={class:"py-5"},X={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},L={class:"bg-white overflow-hidden shadow-xl sm:rounded-lg"},M={class:"w-full"},W={class:"border border-solid bg-blue-100"},E={class:"m5 p-5 border border-solid font-black",colspan:"2"},J={key:0,class:"m5 p-5 border border-solid font-black text-center",colspan:"3"},K={class:"text-center p-2 border border-solid hover:bg-gray-100 focus-within:bg-gray-100"},Q={class:"p-2 mr-2 border border-solid hover:bg-gray-100 focus-within:bg-gray-100"},T={class:"text-center px-4 py-2 p-2 mr-2 border border-solid"},q={__name:"Index",props:{service_units:Object,sub_units:Object,user:Object},setup(n){const A=n,r=R({service_id:null,unit_id:null}),z=async(l,e)=>{r.service_id=l,r.unit_id=e,y.get("/csi",r,{preserveState:!0})},$=async()=>{r.form_type="all units",y.get("/csi/all-units",r,{preserveState:!0})},w=_(!1),x=_(""),k=_({}),F=async(l,e)=>{r.service_id=l,r.unit_id=e,y.get("/csi/view",r,{preserveState:!0})},v=async(l,e,i)=>{w.value=l,x.value=e,i&&(k.value=i)},N=()=>{window.open("https://drive.google.com/file/d/1XIws77_Wf1yjT-TmLDcucqFG8-kFuGJm/view?usp=drive_link","_blank")};return(l,e)=>{const i=m("v-btn"),h=m("v-col"),U=m("v-row"),V=m("v-divider"),P=m("v-card");return c(),C(B,{title:"Dashboard"},{header:s(()=>e[3]||(e[3]=[t("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Services Units ",-1)])),default:s(()=>[t("div",O,[t("div",X,[t("div",L,[o(P,null,{default:s(()=>[o(U,null,{default:s(()=>[n.user.account_type=="admin"?(c(),C(h,{key:0,class:"text-left m-5 mb-1"},{default:s(()=>[o(i,{onClick:e[0]||(e[0]=d=>v(!0,"add_new_service",null)),"prepend-icon":"mdi-plus",color:"primary",size:"small"},{default:s(()=>e[4]||(e[4]=[u(" Add New Service ")])),_:1})]),_:1})):b("",!0),o(h,{class:"text-right m-5 mb-1"},{default:s(()=>[o(i,{onClick:e[1]||(e[1]=d=>$()),"prepend-icon":"mdi-file",color:"yellow",style:{"margin-right":"100px"},size:"small"},{default:s(()=>e[5]||(e[5]=[u(" All Unit Ratings ")])),_:1}),o(i,{"prepend-icon":"mdi-printer",class:"mr-5",color:"success",size:"small",onClick:e[2]||(e[2]=d=>N())},{default:s(()=>e[6]||(e[6]=[u("CSF Form(manual) ")])),_:1})]),_:1})]),_:1}),t("table",M,[e[10]||(e[10]=t("thead",{class:"font-bold text-center"},[t("th",{class:"pb-4 pt-6 px-6",colspan:"2"},"Services Units"),t("th",{class:"pb-4 pt-6 px-6"},"Actions")],-1)),n.service_units?(c(!0),p(f,{key:0},S(n.service_units.data,(d,G)=>(c(),p(f,{key:d.id},[t("tr",W,[t("td",E,g(d.services_name),1),n.user.account_type=="admin"?(c(),p("td",J,[o(i,{onClick:a=>v(!0,"add_new_unit",d),"prepend-icon":"mdi-plus",color:"primary",size:"small"},{default:s(()=>e[7]||(e[7]=[u(" Add New Unit ")])),_:2},1032,["onClick"])])):b("",!0)]),(c(!0),p(f,null,S(d.units,(a,H)=>(c(),p("tr",{key:a.id},[t("td",K,g(a.id),1),t("td",Q,g(a.unit_name),1),t("td",T,[t("div",null,[o(i,{"prepend-icon":"mdi-eye",class:"mr-3",size:"small",onClick:j=>F(d.id,a.id),disabled:n.user.account_type=="user"&&n.user.unit_id!=a.id},{default:s(()=>e[8]||(e[8]=[u(" View ")])),_:2},1032,["onClick","disabled"]),o(i,{onClick:j=>z(d.id,a.id),"prepend-icon":"mdi-file",color:"yellow",size:"small",disabled:n.user.account_type=="user"&&n.user.unit_id!=a.id},{default:s(()=>e[9]||(e[9]=[u(" Rating ")])),_:2},1032,["onClick","disabled"])])])]))),128))],64))),128)):b("",!0)]),o(V,{thickness:1,class:"border-opacity-100 mb-5"})]),_:1})])])]),o(I,{value:w.value,action_clicked:x.value,account:l.account,selected_service:k.value,data:A,onInput:v,onReloadAccounts:l.reloadAccounts},null,8,["value","action_clicked","account","selected_service","data","onReloadAccounts"])]),_:1})}}},ne=D(q,[["__scopeId","data-v-5fe8a75e"]]);export{ne as default};
